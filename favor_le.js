!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=function(t,n){return e(1)(t,n)}},function(t,n,e){"use strict";function r(t,n){return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function i(t,n){return t.forEach(function(t){for(var e in t)n[e]=t[e]}),n}function o(t,n){var e=Object.keys(n).filter(function(t){return"components"!==t}),r=e.map(function(t){return h.convertToCamelCase(t)});r.forEach(function(r,i){var o=function(){return n[e[i]]};t["get"+r]=o})}function c(t){return t.components.forEach(function(n){if(n._eventEmitter=new f,n.link){var e=t.components.filter(function(t){return t.name===n.link})[0];if(e){if(e.address&&(n.address=e.address),e.structure){var r=n.type;e.structure[r].address?n.address=e.structure[r].address:n.structure=e.structure[r]}e.methods&&i(e.methods,n)}}n.methods&&i(n.methods,n)}),global._fvr=t.components}function u(){}function a(t){var n=new u;r(l,n);for(var e in s)n[e]=s[e];return t?n.init(t):n}var l,s,f=(e(2),e(3).EventEmitter),h=e(4),p=["../lib/device_abilities.js","../lib/getters_and_setters.js","../lib/error_handling.js"],v=e(6);u.prototype.init=function(t){return this.deviceAbilities(t)},t.exports=function(t,n){return l=t,n&&p.push.apply(p,n),s=v(p),o(s,l),Object.keys(s).forEach(function(t){a[t]=s[t]}),c(l),a}},function(t,n){t.exports=require("fs")},function(t,n){t.exports=require("events")},function(t,n,e){function r(t){var n=this;n._component._eventEmitter&&Object.keys(n._component._eventEmitter._events).filter(function(t){return"initialized"!==t?t:void 0}).forEach(function(e){n._component._eventEmitter.emit.call(n,e,t)})}function i(){return this._watch?this._watch.change:this._method.name||this._method}function o(t){var n=this;return _fvr[n._index].formatOutput&&t&&(t=_fvr[n._index].formatOutput.call(n,t)),r.call(n,t),n._returnAs?n._callback.call(n,t[this._returnAs]):void n._callback.call(n,t)}function c(t){return Array.isArray(t)?t:[t]}function u(t){return t.formatInput?t.formatInput.call(this,this._valueToSet,t):t.val?t.val===!0?this._valueToSet:t.val:0}function a(t,n){function e(t,n){a.err.push(t),a.val.push(n)}var r=this,a={val:[],err:[]},s=i.call(r);if(n)var f=c(r._component.init).concat(c(r._component[s]));else var f=c(r._component[s]);var h=f.map(function(i,o){return i.address=r._component.address,i.val=u.call(r,i),i._componentIndex=r._index,i.cb=e.bind(r),function(e){t(i,e),n&&o===c(_fvr[r._index].init).length-1&&(_fvr[r._index].initialized=!0)}});l.series(h,function(t,n){"set"===r._method.name&&(n=r._valueToSet),o.call(r,n)})}var l=e(5);n.getComponent=function(){if(this._parent){var t=Object.keys(_fvr[this._parent].structure)[this._index];return _fvr[this._parent].structure[t]}return _fvr[this._index]},n.emitEvents=r,n.getMethod=i,n.runMethod=a,n.convertToCamelCase=function(t){return t.split("-").map(function(t,n){var e=t[0];return e.toUpperCase()+t.replace(e,"")}).join().replace(",","")}},function(t,n,e){var r,i;/*!
	 * async
	 * https://github.com/caolan/async
	 *
	 * Copyright 2010-2014 Caolan McMahon
	 * Released under the MIT license
	 */
!function(){function e(){}function o(t){return t}function c(t){return!!t}function u(t){return!t}function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function l(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function s(t){return F(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function f(t,n){for(var e=-1,r=t.length;++e<r;)n(t[e],e,t)}function h(t,n){for(var e=-1,r=t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}function p(t){return h(Array(t),function(t,n){return n})}function v(t,n,e){return f(t,function(t,r,i){e=n(e,t,r,i)}),e}function d(t,n){f(H(t),function(e){n(t[e],e)})}function _(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return e;return-1}function m(t){var n,e,r=-1;return s(t)?(n=t.length,function(){return r++,n>r?r:null}):(e=H(t),n=e.length,function(){return r++,n>r?e[r]:null})}function g(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),i=0;e>i;i++)r[i]=arguments[i+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function y(t){return function(n,e,r){return t(n,r)}}function b(t){return function(n,r,i){i=l(i||e),n=n||[];var o=m(n);if(0>=t)return i(null);var c=!1,u=0,s=!1;!function f(){if(c&&0>=u)return i(null);for(;t>u&&!s;){var e=o();if(null===e)return c=!0,void(0>=u&&i(null));u+=1,r(n[e],e,a(function(t){u-=1,t?(i(t),s=!0):f()}))}}()}}function k(t){return function(n,e,r){return t(Q.eachOf,n,e,r)}}function x(t){return function(n,e,r,i){return t(b(e),n,r,i)}}function w(t){return function(n,e,r){return t(Q.eachOfSeries,n,e,r)}}function E(t,n,r,i){i=l(i||e),n=n||[];var o=s(n)?[]:{};t(n,function(t,n,e){r(t,function(t,r){o[n]=r,e(t)})},function(t){i(t,o)})}function O(t,n,e,r){var i=[];t(n,function(t,n,r){e(t,function(e){e&&i.push({index:n,value:t}),r()})},function(){r(h(i.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})}function j(t,n,e,r){O(t,n,function(t,n){e(t,function(t){n(!t)})},r)}function I(t,n,e){return function(r,i,o,c){function u(){c&&c(e(!1,void 0))}function a(t,r,i){return c?void o(t,function(r){c&&n(r)&&(c(e(!0,t)),c=o=!1),i()}):i()}arguments.length>3?t(r,i,a,u):(c=o,o=i,t(r,a,u))}}function S(t,n){return n}function C(t,n,r){r=r||e;var i=s(n)?[]:{};t(n,function(t,n,e){t(g(function(t,r){r.length<=1&&(r=r[0]),i[n]=r,e(t)}))},function(t){r(t,i)})}function z(t,n,e,r){var i=[];t(n,function(t,n,r){e(t,function(t,n){i=i.concat(n||[]),r(t)})},function(t){r(t,i)})}function A(t,n,r){function i(t,n,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return t.started=!0,F(n)||(n=[n]),0===n.length&&t.idle()?Q.setImmediate(function(){t.drain()}):(f(n,function(n){var o={data:n,callback:i||e};r?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void Q.setImmediate(t.process))}function o(t,n){return function(){c-=1;var e=!1,r=arguments;f(n,function(t){f(u,function(n,r){n!==t||e||(u.splice(r,1),e=!0)}),t.callback.apply(t,r)}),t.tasks.length+c===0&&t.drain(),t.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var c=0,u=[],l={tasks:[],concurrency:n,payload:r,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(t,n){i(l,t,!1,n)},kill:function(){l.drain=e,l.tasks=[]},unshift:function(t,n){i(l,t,!0,n)},process:function(){for(;!l.paused&&c<l.concurrency&&l.tasks.length;){var n=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),e=h(n,function(t){return t.data});0===l.tasks.length&&l.empty(),c+=1,u.push(n[0]);var r=a(o(l,n));t(e,r)}},length:function(){return l.tasks.length},running:function(){return c},workersList:function(){return u},idle:function(){return l.tasks.length+c===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),n=1;t>=n;n++)Q.setImmediate(l.process)}}};return l}function T(t){return g(function(n,e){n.apply(null,e.concat([g(function(n,e){"object"==typeof console&&(n?console.error&&console.error(n):console[t]&&f(e,function(n){console[t](n)}))})]))})}function L(t){return function(n,e,r){t(p(n),e,r)}}function M(t){return g(function(n,e){var r=g(function(e){var r=this,i=e.pop();return t(n,function(t,n,i){t.apply(r,e.concat([i]))},i)});return e.length?r.apply(this,e):r})}function B(t){return g(function(n){var e=n.pop();n.push(function(){var t=arguments;r?Q.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var r=!0;t.apply(this,n),r=!1})}var q,Q={},P="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=P&&(q=P.async),Q.noConflict=function(){return P.async=q,Q};var W=Object.prototype.toString,F=Array.isArray||function(t){return"[object Array]"===W.call(t)},U=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},H=Object.keys||function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n},R="function"==typeof setImmediate&&setImmediate,V=R?function(t){R(t)}:function(t){setTimeout(t,0)};"object"==typeof process&&"function"==typeof process.nextTick?Q.nextTick=process.nextTick:Q.nextTick=V,Q.setImmediate=R?V:Q.nextTick,Q.forEach=Q.each=function(t,n,e){return Q.eachOf(t,y(n),e)},Q.forEachSeries=Q.eachSeries=function(t,n,e){return Q.eachOfSeries(t,y(n),e)},Q.forEachLimit=Q.eachLimit=function(t,n,e,r){return b(n)(t,y(e),r)},Q.forEachOf=Q.eachOf=function(t,n,r){function i(t){u--,t?r(t):null===o&&0>=u&&r(null)}r=l(r||e),t=t||[];for(var o,c=m(t),u=0;null!=(o=c());)u+=1,n(t[o],o,a(i));0===u&&r(null)},Q.forEachOfSeries=Q.eachOfSeries=function(t,n,r){function i(){var e=!0;return null===c?r(null):(n(t[c],c,a(function(t){if(t)r(t);else{if(c=o(),null===c)return r(null);e?Q.setImmediate(i):i()}})),void(e=!1))}r=l(r||e),t=t||[];var o=m(t),c=o();i()},Q.forEachOfLimit=Q.eachOfLimit=function(t,n,e,r){b(n)(t,e,r)},Q.map=k(E),Q.mapSeries=w(E),Q.mapLimit=x(E),Q.inject=Q.foldl=Q.reduce=function(t,n,e,r){Q.eachOfSeries(t,function(t,r,i){e(n,t,function(t,e){n=e,i(t)})},function(t){r(t,n)})},Q.foldr=Q.reduceRight=function(t,n,e,r){var i=h(t,o).reverse();Q.reduce(i,n,e,r)},Q.transform=function(t,n,e,r){3===arguments.length&&(r=e,e=n,n=F(t)?[]:{}),Q.eachOf(t,function(t,r,i){e(n,t,r,i)},function(t){r(t,n)})},Q.select=Q.filter=k(O),Q.selectLimit=Q.filterLimit=x(O),Q.selectSeries=Q.filterSeries=w(O),Q.reject=k(j),Q.rejectLimit=x(j),Q.rejectSeries=w(j),Q.any=Q.some=I(Q.eachOf,c,o),Q.someLimit=I(Q.eachOfLimit,c,o),Q.all=Q.every=I(Q.eachOf,u,u),Q.everyLimit=I(Q.eachOfLimit,u,u),Q.detect=I(Q.eachOf,o,S),Q.detectSeries=I(Q.eachOfSeries,o,S),Q.detectLimit=I(Q.eachOfLimit,o,S),Q.sortBy=function(t,n,e){function r(t,n){var e=t.criteria,r=n.criteria;return r>e?-1:e>r?1:0}Q.map(t,function(t,e){n(t,function(n,r){n?e(n):e(null,{value:t,criteria:r})})},function(t,n){return t?e(t):void e(null,h(n.sort(r),function(t){return t.value}))})},Q.auto=function(t,n,r){function i(t){m.unshift(t)}function o(t){var n=_(m,t);n>=0&&m.splice(n,1)}function c(){a--,f(m.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(r=n,n=null),r=l(r||e);var u=H(t),a=u.length;if(!a)return r(null);n||(n=a);var s={},h=0,p=!1,m=[];i(function(){a||r(null,s)}),f(u,function(e){function u(){return n>h&&v(y,function(t,n){return t&&s.hasOwnProperty(n)},!0)&&!s.hasOwnProperty(e)}function a(){u()&&(h++,o(a),f[f.length-1](m,s))}if(!p){for(var l,f=F(t[e])?t[e]:[t[e]],m=g(function(t,n){if(h--,n.length<=1&&(n=n[0]),t){var i={};d(s,function(t,n){i[n]=t}),i[e]=n,p=!0,r(t,i)}else s[e]=n,Q.setImmediate(c)}),y=f.slice(0,f.length-1),b=y.length;b--;){if(!(l=t[y[b]]))throw new Error("Has nonexistent dependency in "+y.join(", "));if(F(l)&&_(l,e)>=0)throw new Error("Has cyclic dependencies")}u()?(h++,f[f.length-1](m,s)):i(a)}})},Q.retry=function(t,n,e){function r(t,n){if("number"==typeof n)t.times=parseInt(n,10)||o;else{if("object"!=typeof n)throw new Error("Unsupported argument type for 'times': "+typeof n);t.times=parseInt(n.times,10)||o,t.interval=parseInt(n.interval,10)||c}}function i(t,n){function e(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},n)}}function r(t){return function(n){setTimeout(function(){n(null)},t)}}for(;a.times;){var i=!(a.times-=1);u.push(e(a.task,i)),!i&&a.interval>0&&u.push(r(a.interval))}Q.series(u,function(n,e){e=e[e.length-1],(t||a.callback)(e.err,e.result)})}var o=5,c=0,u=[],a={times:o,interval:c},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof t&&(e=n,n=t),"function"!=typeof t&&r(a,t),a.callback=e,a.task=n,a.callback?i():i},Q.waterfall=function(t,n){function r(t){return g(function(e,i){if(e)n.apply(null,[e].concat(i));else{var o=t.next();o?i.push(r(o)):i.push(n),B(t).apply(null,i)}})}if(n=l(n||e),!F(t)){var i=new Error("First argument to waterfall must be an array of functions");return n(i)}return t.length?void r(Q.iterator(t))():n()},Q.parallel=function(t,n){C(Q.eachOf,t,n)},Q.parallelLimit=function(t,n,e){C(b(n),t,e)},Q.series=function(t,n){C(Q.eachOfSeries,t,n)},Q.iterator=function(t){function n(e){function r(){return t.length&&t[e].apply(null,arguments),r.next()}return r.next=function(){return e<t.length-1?n(e+1):null},r}return n(0)},Q.apply=g(function(t,n){return g(function(e){return t.apply(null,n.concat(e))})}),Q.concat=k(z),Q.concatSeries=w(z),Q.whilst=function(t,n,r){if(r=r||e,t()){var i=g(function(e,o){e?r(e):t.apply(this,o)?n(i):r.apply(null,[null].concat(o))});n(i)}else r(null)},Q.doWhilst=function(t,n,e){var r=0;return Q.whilst(function(){return++r<=1||n.apply(this,arguments)},t,e)},Q.until=function(t,n,e){return Q.whilst(function(){return!t.apply(this,arguments)},n,e)},Q.doUntil=function(t,n,e){return Q.doWhilst(t,function(){return!n.apply(this,arguments)},e)},Q.during=function(t,n,r){r=r||e;var i=g(function(n,e){n?r(n):(e.push(o),t.apply(this,e))}),o=function(t,e){t?r(t):e?n(i):r(null)};t(o)},Q.doDuring=function(t,n,e){var r=0;Q.during(function(t){r++<1?t(null,!0):n.apply(this,arguments)},t,e)},Q.queue=function(t,n){var e=A(function(n,e){t(n[0],e)},n,1);return e},Q.priorityQueue=function(t,n){function r(t,n){return t.priority-n.priority}function i(t,n,e){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);e(n,t[o])>=0?r=o:i=o-1}return r}function o(t,n,o,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");return t.started=!0,F(n)||(n=[n]),0===n.length?Q.setImmediate(function(){t.drain()}):void f(n,function(n){var u={data:n,priority:o,callback:"function"==typeof c?c:e};t.tasks.splice(i(t.tasks,u,r)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),Q.setImmediate(t.process)})}var c=Q.queue(t,n);return c.push=function(t,n,e){o(c,t,n,e)},delete c.unshift,c},Q.cargo=function(t,n){return A(t,1,n)},Q.log=T("log"),Q.dir=T("dir"),Q.memoize=function(t,n){var e={},r={},i=Object.prototype.hasOwnProperty;n=n||o;var c=g(function(o){var c=o.pop(),u=n.apply(null,o);i.call(e,u)?Q.setImmediate(function(){c.apply(null,e[u])}):i.call(r,u)?r[u].push(c):(r[u]=[c],t.apply(null,o.concat([g(function(t){e[u]=t;var n=r[u];delete r[u];for(var i=0,o=n.length;o>i;i++)n[i].apply(null,t)})])))});return c.memo=e,c.unmemoized=t,c},Q.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},Q.times=L(Q.map),Q.timesSeries=L(Q.mapSeries),Q.timesLimit=function(t,n,e,r){return Q.mapLimit(p(t),n,e,r)},Q.seq=function(){var t=arguments;return g(function(n){var r=this,i=n[n.length-1];"function"==typeof i?n.pop():i=e,Q.reduce(t,n,function(t,n,e){n.apply(r,t.concat([g(function(t,n){e(t,n)})]))},function(t,n){i.apply(r,[t].concat(n))})})},Q.compose=function(){return Q.seq.apply(null,Array.prototype.reverse.call(arguments))},Q.applyEach=M(Q.eachOf),Q.applyEachSeries=M(Q.eachOfSeries),Q.forever=function(t,n){function r(t){return t?i(t):void o(r)}var i=a(n||e),o=B(t);r()},Q.ensureAsync=B,Q.constant=g(function(t){var n=[null].concat(t);return function(t){return t.apply(this,n)}}),Q.wrapSync=Q.asyncify=function(t){return g(function(n){var e,r=n.pop();try{e=t.apply(this,n)}catch(i){return r(i)}U(e)&&"function"==typeof e.then?e.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,e)})},"object"==typeof t&&t.exports?t.exports=Q:(r=[],i=function(){return Q}.apply(n,r),!(void 0!==i&&(t.exports=i)))}()},function(t,n,e){t.exports=function(t){var n={};return t.forEach(function(t){var r=e(7)(t);for(var i in r)n[i]=r[i]}),n}},function(t,n,e){function r(t){return e(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./add_modules":6,"./add_modules.js":6,"./component_utils":4,"./component_utils.js":4,"./device_abilities":8,"./device_abilities.js":8,"./error_handling":9,"./error_handling.js":9,"./favor_obj_builder":1,"./favor_obj_builder.js":1,"./getters_and_setters":10,"./getters_and_setters.js":10,"./protocols/gpio":11,"./protocols/gpio.js":11,"./protocols/i2c":13,"./protocols/i2c.js":13,"./protocols/le/gpio":12,"./protocols/le/gpio.js":12,"./protocols/le/i2c":14,"./protocols/le/i2c.js":14,"./protocols/le/spi":16,"./protocols/le/spi.js":16,"./protocols/spi":15,"./protocols/spi.js":15};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=7},function(t,n){function e(t,n){return this.device=t,this.init(n)}var r=function(t){return new e(this,t)};e.prototype={init:function(t){return this.el=t,this.getComponent(t)},getComponent:function(t){var n=this.splitElement(t);return this.filterComponents(n)},splitElement:function(t){var n=t.match(/^\w+/)[0],e=t.match(/\*(\d+)/),r=t.match(/#([\w+-_]+)/),i=t.match(/\.([\w,-_]+)/),o=t.match(/\[(\w+)\=(\w+)\]/);i&&(i=i[1].split(","));var c=t;return parsedQuery={type:n,count:e?parseFloat(e[1]):null,name:r?r[1]:null,"class":i},o&&(parsedQuery[o[1]]=o[2]),this.device.parsedQuery=parsedQuery,this.device.query=c,parsedQuery},propertyMatch:function(t,n){return null===t||t===n},checkClass:function(t,n){for(var e in n)if("structure"!==e&&t.indexOf(n[e])>=0)return!0;if(n.structure){var r=Object.keys(n.structure),i=r.filter(function(n){return t.indexOf(n)>=0});return i.length>0}return!1},filterComponents:function(t){for(var n=[],e=0;e<_fvr.length;e++){var r=_fvr[e],i=!0,o=["count","class"];for(var c in t)-1==o.indexOf(c)&&i&&(i=this.propertyMatch(t[c],r[c])),"class"===c&&null!==t["class"]&&(i=this.checkClass(t["class"],r));if(i&&n.push(e),t.count===n.length)return this.device._componentMatches=n,this.device}return this.device._componentMatches=n,this.device}},t.exports.deviceAbilities=r},function(t,n){t.exports.onError=function(t,n,e){return _fvr[this._index].onError?_fvr[this._index].onError.call(this,t,n,e):_fvr.onError?_fvr.onError.call(this,t,n,e):void console.log("The following error curred :"+t+" on line "+n+" in script "+e)}},function(t,n,e){function r(){var t=_fvr[this._index]["interface"]||_fvr[this._parent]["interface"];switch(t){case"i2c":b.call(this);break;case"gpio":if(y.initialize.call(this),this._watch)return p.call(this);this._method.call(this);break;case"spi":k.call(this)}}function i(t){return _fvr[this._index][t]&&"function"==typeof _fvr[this._index][t]}function o(){var t=this;if(i.call(this,"get"))return _fvr[this._index].get.call(t,function(n){return t._returnAs?this._callback.call(t,n[t._returnAs]):void this._callback.call(t,n)});switch(_fvr[this._index]["interface"]){case"gpio":y.get.call(this);break;case"i2c":t._method="get",b.call(t,null);break;case"spi":k.call(t)}}function c(t){if(i.call(this,"set"))return _fvr[this._index].set.call(fvr,t,function(){this._callback.call(fvr)});switch(_fvr[this._index]["interface"]){case"gpio":y.set.call(this,t);break;case"i2c":b.call(this);break;case"spi":k.call(this)}}function u(t){for(var n=0;n<this._componentMatches.length;n++)f.call(this,n),this._component.structure?(this._componentValueToSet=t,d.call(this)):(this._valueToSet=a.call(this,t),_fvr[this._index].initialized?("function"!=typeof this._method&&console.log("no method",_fvr[this._index],typeof this._method),this._method.call(this)):r.call(this))}function a(t){var n=x.getComponent.call(this);return n.formatInput?n.formatInput.call(this,t):this._parent&&_fvr[this._parent].formatInput?_fvr[this._parent].formatInput.call(this,t):t}function l(){var t=Object.keys(this._component.structure),n=this;t.forEach(function(t,e){return n._index=e,_fvr[n._parent].structure[n._index].initialized?void n._method.call(n):r.call(n)})}function s(){var t=this;return _fvr.map(function(n,e){return n.name===_fvr[t._index].link?e:void 0}).filter(function(t){return t?t:void 0})[0]}function f(t){var n=this._componentMatches[t],e=_fvr[n];return this._component=e,e.structure?this._parent=n:(delete this._parent,this._index=n),e.link&&(this._index=s.call(this),this._returnAs=_fvr[n].type),this}function h(){var t=this;("gpio"===t._component["interface"]||t._component.get)&&(t._component._streaming=setInterval(function(){return o.call(t,function(n){t._component._eventEmitter.emit("change",n)})},100))}function p(){var t=this;return"gpio"===this._component["interface"]&&"change"===this._watch.watcher?y.attachEvent.call(t):(this._component["interface"]._streaming||"change"!==this._watch.watcher||"gpio"===this._component["interface"]||h.call(this),void this._component._eventEmitter.on(this._watch.watcher,this._callback))}function v(){try{_fvr[this._index]._eventEmitter.removeListener(this._watch.watcher,this._callback)}catch(t){console.log("err",t)}}function d(){var t=Object.keys(this._component.structure),n=this;t.forEach(function(t,e){n._index=e;var i=x.getComponent.call(n);return"set"===n._method.name&&(n._valueToSet=a.call(n,n._componentValueToSet)),i.initialized?n._method.call(n):r.call(n)})}function _(t){if(-1===["change","data"].indexOf(t))return this.onError.call(n,"must pass a valid watch of change or data");this._component.direction||"gpio"!==this._component["interface"]||(this.direction="both");var n=this;this._watch={event:!0,watcher:t,change:this.direction||n._component.get?"get":"set"}}function m(t,n){var e=this;e._method=m;for(var i=0;i<this._componentMatches.length;i++){if(f.call(this,i),_.call(this,t,n),g.call(this,n),!this._component.structure)return this._component.initialized?p.call(this):r.call(this);d.call(this)}}function g(t){return t?this._callback=t:void 0}var y=e(11),b=e(13),k=e(15),x=(e(3).EventEmitter,e(4)),w=function(t,n){this._method=c,g.call(this,n),u.call(this,t)},E=function(t){this._method=o,g.call(this,t);for(var n=0;n<this._componentMatches.length;n++){if(f.call(this,n),!this._component.structure)return _fvr[this._index].initialized?this._method.call(this):r.call(this);l.call(this)}},O=function(t,n){for(var e=0;e<this._componentMatches.length;e++)f.call(this,e),_.call(this,t,n),g.call(this,n),_fvr[this._index].structure?d.call(this,v):v.call(this)},j=function(t,n){m.call(this,t,n)};t.exports.get=E,t.exports.set=w,t.exports.on=j,t.exports.removeListener=O},function(t,n,e){function r(){var t=s.getComponent.call(this);!t.direction&&_fvr[this._parent]&&_fvr[this._parent].direction&&(t.direction=_fvr[this._parent].direction),t.gpio=new a(t.address,t.direction),t.initialized=!0}function i(){var t=this;_fvr[this._index].gpio.read(function(n,e){return n?t.onError.call(t,"error getting gpio ",n):_fvr[t._index].formatOutput&&t._callback?t._callback.call(t,_fvr[t._index].formatOutput.call(t,e)):t._returnAs?t._callback.call(t,e[t._returnAs]):t._callback?t._callback.call(t,e):void 0})}function o(){return"number"==typeof this._valueToSet?!0:this.onError.call(this,"invalid value "+this._valueToSet+" to set GPIO.",46,l)}function c(){var t=this._valueToSet;if(o.call(this,t)){var n=this,e=s.getComponent.call(this);e.gpio.write(t,function(t,e){return n._formatOutput&&(e=_fvr[n._index].formatOutput.call(n,e)),n._returnAs?e=e[n._returnAs]:void n._callback.call(n,e)})}}function u(){var t=s.getComponent.call(this);t.gpio.watch(this._callback)}var a=e(12),l="protocols/gpio.js",s=e(4);t.exports={initialize:r,set:c,get:i,attachEvent:u}},function(t,n){function e(t){var n=digitalRead(this.pin);t.call(this,null,n)}function r(t,n){Number.isInteger(t)?digitalWrite(this.pin,t):analogWrite(this.pin,t),n.call(this,null,t)}t.exports=function(t,n){return this.pin=t,this.direction=n,this.read=e,this.write=r,this}},function(t,n,e){function r(t){return"read"===t.type?"readI2cBlock":"write"===t.type?"writeI2cBlock":t.type}function i(t,n){var e=function(t,e,r){n(t,r)},i=r(t),o=t.val;_fvr.i2c.le&&!Buffer.isBuffer(o)&&(o=new Buffer(o));var c=o.length||0;_fvr.i2c[i](t.address,t.cmd,c,o,e)}var o=e(14),c=e(4);t.exports=function(){var t=this;if(void 0===!t.getI2cBus)return t.onError(this,"i2c bus address must be specified");_fvr.i2c||(_fvr.i2c=o.openSync(t.getI2cBus()));var n=c.runMethod.bind(t);return!_fvr[t._index].init||_fvr[t._index].initialized?(_fvr[t._index].initialized||(_fvr[t._index].initialized=!0),n(i)):void n(i,!0)}},function(t,n){function e(){I2C.le=!0,I2C.writeI2cBlock=function(t,n,e,r,i){var o=I2C.writeTo(t,n)||null,c=o?o.length:0;i(null,c,o)},I2C.readI2cBlock=function(t,n,e,r,i){var o=I2C.readFrom(t,e);i(null,o.length,o)}}n.openSync=function(t){return e(),I2C.setup(t),I2C}},function(t,n,e){function r(t){return t.val?t.val:t.length?t.length:0}function i(t,n){var e=r(t);Buffer.isBuffer(e)||(e=new Buffer(e));var i=t.length?t.length:e.length||0;return _fvr[t._componentIndex]._spi.transfer(e,i,function(t,e){n(t,e)})}function o(){var t=this,n=_fvr[this._index];n._spi=new c.initialize(n.address);var e=u.runMethod.bind(t);return n.init?e(i,!0):(n.initialized=!0,void e(i))}var c=e(16),u=e(4);t.exports=function(){var t=this;_fvr[this._index];if(!_fvr[t._index].initialized)return o.call(t);var n=u.runMethod.bind(t);n(i)}},function(t,n){}]);